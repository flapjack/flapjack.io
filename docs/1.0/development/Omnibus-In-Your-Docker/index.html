<!DOCTYPE html>
<html lang="en">
    <head>
  <title>Flapjack, monitoring notification routing + event processing</title>
  <link rel="stylesheet" href="/stylesheets/bootstrap.min.css"/>
  <link rel="stylesheet" href="/stylesheets/api-screen.css" type="text/css" media="screen" />
  <link rel="stylesheet" href="/stylesheets/api-syntax.css" type="text/css" media="screen" />
  <link rel="stylesheet" href="/stylesheets/github-markdown.css" type="text/css">
  <link rel="shortcut icon" href="/images/flapjack-2013-favicon-64-32-24-16.ico" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    .markdown-body {
        min-width: 200px;
        max-width: 790px;
        margin: 0 auto;
        padding: 30px;
    }
  </style>
</head>
<body>
  <nav class="navbar navbar-default navbar-inverse" role="navigation" style="margin-bottom: 0px">
    <div class="navbar-header">
      <a class="navbar-brand" href="/">
        <img class="logo" src="/images/flapjack-2013-notext-transparent-300-300.png"/>
        <span class="name">Flapjack</span>
      </a>
    </div>
    <div class="collapse navbar-collapse navbar-ex1-collapse">
      <ul class="nav navbar-nav navbar-right">
        <li><a href="/docs/1.0/usage/quickstart">Quickstart</a></li>
        <li><a href="/docs">Documentation</a></li>
        <li><a href="/support">Support</a></li>
      </ul>
    </div>
  </nav>

    <center>
      
    </center>
    <div class="container content">
      <div class="row">
        <div class="col-md-offset-1 col-md-10 markdown-body">
        <h1 id='omnibus-in-your-docker'>Omnibus in your Docker</h1>
<p>This doc covers how to get a local development environment going for building Flapjack packages.</p>
<h2 id='set-up-a-docker-server'>Set up a docker server</h2>
<p>The easiest way to do this is to use <a href="https://github.com/boot2docker/boot2docker-cli">boot2docker-cli</a> to manage a VirtualBox VM running <a href="https://github.com/boot2docker/boot2docker">boot2docker linux</a>, a very lightweight linux distro designed to run docker server and not much else (it uses busybox for your shell if you ssh into it). The boot2docker cli is written in Go and runs on Mac OS, Windows and Linux.</p>

<p>Here&rsquo;s how I installed it on Mac OS X Mavericks (10.9.3) with homebrew and VirtualBox 4.3.10 already installed:</p>
<pre><code class="highlight plaintext">brew update
brew install boot2docker
</code></pre>

<p>Specify some configuration, in particular so the IP range is within a subnet that your VPN is not going to grab routes to:</p>

<p><strong>~/.boot2docker/profile</strong></p>
<pre><code class="highlight plaintext">DiskSize = 20000
Memory = 2048
SSHPort = 2022
DockerPort = 2375
HostIP = "172.20.10.3"
DHCPIP = "172.20.10.99"
NetMask = [255, 255, 255, 0]
LowerIP = "172.20.10.103"
UpperIP = "172.20.10.254"
DHCPEnabled = true
</code></pre>

<p>Create, and start up, your boot2docker docker server:</p>
<pre><code class="highlight plaintext">boot2docker init
boot2docker start
</code></pre>

<p>It&rsquo;ll give you an address to set DOCKER_HOST to so that your docker cli knows how to access your docker server, so you&rsquo;ll then need to run something the following:</p>
<pre><code class="highlight plaintext">export DOCKER_HOST=tcp://172.20.10.103:2375
</code></pre>

<p>Test that everything is working:</p>
<pre><code class="highlight plaintext">docker ps
</code></pre>

<p>You should see:</p>
<pre><code class="highlight plaintext">$ docker ps
CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES
</code></pre>

<p>This shows that there are no docker containers running.</p>

<p>More better <a href="https://github.com/boot2docker/boot2docker">doco on boot2docker</a> is available.</p>
<h2 id='download-omnibus-ubuntu--omnibus-debian--omnibus-centos-images'>Download omnibus-ubuntu / omnibus-debian / omnibus-centos images</h2>
<p>Pull down the latest flapjack/omnibus-distro images from the docker registry for your preferred distribution:</p>
<pre><code class="highlight plaintext">docker pull flapjack/omnibus-ubuntu
docker pull flapjack/omnibus-debian
docker pull flapjack/omnibus-centos
</code></pre>

<p>This will pull down several images each. If you just want an image for a particular Ubuntu release, supply either the <code class="prettyprint">trusty</code> or <code class="prettyprint">precise</code> tags to the above <code class="prettyprint">docker pull</code> command, eg:</p>
<pre><code class="highlight plaintext">docker pull flapjack/omnibus-ubuntu:trusty
</code></pre>

<p>The same applies to Debian and Centos:</p>
<pre><code class="highlight plaintext">docker pull flapjack/omnibus-debian:wheezy
docker pull flapjack/omnibus-centos:6
</code></pre>

<p>Details of the build history and so on for omnibus-ubuntu are visible on the <a href="https://registry.hub.docker.com/u/flapjack/omnibus-ubuntu">Docker Hub</a>.</p>

<p>The image is rebuilt automatically when the <a href="https://github.com/flapjack/omnibus-ubuntu">omnibus-ubuntu repo</a> receives new commits.</p>
<h2 id='build'>Build</h2>
<p>Now you should be good to <a href="https://github.com/flapjack/omnibus-flapjack/blob/master/README.md#build">build packages</a> with the <a href="https://github.com/flapjack/omnibus-flapjack/blob/master/README.md#build">omnibus-flapjack</a> project.</p>

      </div>
    </div>
  </div> <!-- container -->

  <footer>
<div class="row">
<div class="col-md-4 col-md-offset-2">
  Flapjack was conceptualised by
  <a href="https://twitter.com/auxesis">Lindsay Holmwood</a>.
  <a href="https://twitter.com/jessereynolds">Jesse Reynolds</a> and
  <a href="https://github.com/ali-graham">Ali Graham</a>
  are the primary developers.
  View the project on <a href="https://github.com/flapjack/flapjack">GitHub</a>.
</div>
<div class="col-md-4 sponsor">
  <a href="http://bulletproof.net.au" target="_bulletproof">
    <img class="bulletproof" src="/images/bulletproof-logo.png"/>
  </a>
  <span class="bulletproof subtext">
    Development sponsored by
    <a href="http://bulletproof.net.au" target="_bulletproof">Bulletproof</a>.
  </span>
</div>
</div>
</footer>

<script type="text/javascript">
  var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
  document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
  try {
    var pageTracker = _gat._getTracker("UA-388962-5");
    pageTracker._trackPageview();
  } catch(err) {}
</script>

</body>
</html>
